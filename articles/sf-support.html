<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Simple feature support • flexpolyline</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Simple feature support">
<meta property="og:description" content="flexpolyline">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">flexpolyline</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
<li>
  <a href="../articles/flexpolyline.html">Get started</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/sf-support.html">Simple feature support</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/munterfinger/flexpolyline">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://twitter.com/munterfi1">
    <span class="fa fa-twitter fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://munterfinger.ch">
    <span class="fa fa-globe fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="sf-support_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Simple feature support</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/munterfinger/flexpolyline/blob/master/vignettes/sf-support.Rmd"><code>vignettes/sf-support.Rmd</code></a></small>
      <div class="hidden name"><code>sf-support.Rmd</code></div>

    </div>

    
    
<div id="simple-features" class="section level2">
<h2 class="hasAnchor">
<a href="#simple-features" class="anchor"></a>Simple features</h2>
<p>A common way to deal with spatial data in R is using the <a href="https://cran.r-project.org/web/packages/sf/index.html">sf</a> package, which is built on the concept of simple features. According to the the sf package <a href="https://r-spatial.github.io/sf/articles/sf1.html">vignette</a>, simple features are <em>“…a formal standard (ISO 19125-1:2004) that describes how objects in the real world can be represented in computers, with emphasis on the spatial geometry of these objects. It also describes how such objects can be stored in and retrieved from databases, and which geometrical operations should be defined for them.”</em></p>
<p>The most common simple feature geometry types are: POINT, LINESTRING, POLYGON, MULTIPOINT, MULTILINESTRING, MULTIPOLYGON. Whereby all geometries are based on POINTs. In the flexible polyline encoding binding in this package only LINESTRINGs are supported</p>
<p>There are four possible dimension combinations of simple features package. In the <code>flexpolyine</code> package the first three dimension combinations are be represented as follows:</p>
<ul>
<li>XY: Represented as line with LNG and LAT dimensions.</li>
<li>XYz: Represented as line with LNG, LAT and LEVEL/ALTITUDE/ELEVATION as third dimension.</li>
<li>XYM: Represented as aline with LNG, LAT and CUSTOM1/CUSTOM2 as third dimension.</li>
<li>XYZM: Not supported by the flexible polyline encoding.</li>
</ul>
</div>
<div id="encoding-and-decoding" class="section level2">
<h2 class="hasAnchor">
<a href="#encoding-and-decoding" class="anchor"></a>Encoding and decoding</h2>
<div id="simple-feature-geometry-sfg" class="section level3">
<h3 class="hasAnchor">
<a href="#simple-feature-geometry-sfg" class="anchor"></a>Simple feature geometry (sfg)</h3>
<p>If no value for <code>third_dim</code> is provided in <code><a href="../reference/encode_sf.html">encode_sf()</a></code>, the dimensions of the sf geometry are considered. In case of <code>"XYZ"</code> the third dimension is set to <code>"ELEVATION"</code> and thereby recognized again as <code>"XYZ"</code> by <code><a href="../reference/decode_sf.html">decode_sf()</a></code> during decoding:</p>
<div class="sourceCode" id="cb1"><pre class="downlit">
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="kw"><a href="https://munterfinger.github.io/flexpolyline">flexpolyline</a></span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="kw"><a href="https://r-spatial.github.io/sf">sf</a></span>)
<span class="co">#&gt; Linking to GEOS 3.8.0, GDAL 3.0.4, PROJ 7.0.0</span>

<span class="kw">coords</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span>(
    <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">8.69821</span>, <span class="fl">50.10228</span>, <span class="fl">10.11111</span>,
      <span class="fl">8.69567</span>, <span class="fl">50.10201</span>, <span class="fl">20.22222</span>,
      <span class="fl">8.69150</span>, <span class="fl">50.10063</span>, <span class="fl">30.33333</span>,
      <span class="fl">8.68752</span>, <span class="fl">50.09878</span>, <span class="fl">40.44444</span>),
    ncol = <span class="fl">3</span>, byrow = <span class="fl">TRUE</span>
)

(<span class="kw">sfg_z</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/sf/man/st.html">st_linestring</a></span>(<span class="kw">coords</span>, dim = <span class="st">"XYZ"</span>))
<span class="co">#&gt; LINESTRING Z (8.69821 50.10228 10.11111, 8.69567 50.10201 20.22222, 8.6915 50.10063 30.33333, 8.68752 50.09878 40.44444)</span>

(<span class="kw">sfg_enc_z</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/encode_sf.html">encode_sf</a></span>(<span class="kw">sfg_z</span>))
<span class="co">#&gt; [1] "B1Voz5xJ67i1Bu629B1B7Pu629BzIhau629BxL7Yu629B"</span>

<span class="fu"><a href="../reference/decode_sf.html">decode_sf</a></span>(<span class="kw">sfg_enc_z</span>)
<span class="co">#&gt; Simple feature collection with 1 feature and 2 fields</span>
<span class="co">#&gt; geometry type:  LINESTRING</span>
<span class="co">#&gt; dimension:      XYZ</span>
<span class="co">#&gt; bbox:           xmin: 8.68752 ymin: 50.09878 xmax: 8.69821 ymax: 50.10228</span>
<span class="co">#&gt; z_range:        zmin: 10.11111 zmax: 40.44444</span>
<span class="co">#&gt; geographic CRS: WGS 84</span>
<span class="co">#&gt;   id      dim3                       geometry</span>
<span class="co">#&gt; 1  1 ELEVATION LINESTRING Z (8.69821 50.10...</span>
</pre></div>
<p>In case of <code>"XYM"</code> the third dimension is set to <code>"CUSTOM1"</code> and again set to <code>"XYM"</code> in decoding:</p>
<div class="sourceCode" id="cb2"><pre class="downlit">
(<span class="kw">sfg_m</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/sf/man/st.html">st_linestring</a></span>(<span class="kw">coords</span>, dim = <span class="st">"XYM"</span>))
<span class="co">#&gt; LINESTRING M (8.69821 50.10228 10.11111, 8.69567 50.10201 20.22222, 8.6915 50.10063 30.33333, 8.68752 50.09878 40.44444)</span>

(<span class="kw">sfg_enc_m</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/encode_sf.html">encode_sf</a></span>(<span class="kw">sfg_m</span>))
<span class="co">#&gt; [1] "BlXoz5xJ67i1Bu629B1B7Pu629BzIhau629BxL7Yu629B"</span>

<span class="fu"><a href="../reference/decode_sf.html">decode_sf</a></span>(<span class="kw">sfg_enc_m</span>)
<span class="co">#&gt; Simple feature collection with 1 feature and 2 fields</span>
<span class="co">#&gt; geometry type:  LINESTRING</span>
<span class="co">#&gt; dimension:      XYM</span>
<span class="co">#&gt; bbox:           xmin: 8.68752 ymin: 50.09878 xmax: 8.69821 ymax: 50.10228</span>
<span class="co">#&gt; m_range:        mmin: 10.11111 mmax: 40.44444</span>
<span class="co">#&gt; geographic CRS: WGS 84</span>
<span class="co">#&gt;   id    dim3                       geometry</span>
<span class="co">#&gt; 1  1 CUSTOM1 LINESTRING M (8.69821 50.10...</span>
</pre></div>
</div>
<div id="simple-feature-geometry-list-column-sfc" class="section level3">
<h3 class="hasAnchor">
<a href="#simple-feature-geometry-list-column-sfc" class="anchor"></a>Simple feature geometry list-column (sfc)</h3>
<p>The geometry column in simple feature data sets is called simple feature geometry list-column and is supported as input in encoding:</p>
<div class="sourceCode" id="cb3"><pre class="downlit">
(<span class="kw">sfc</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/sf/man/st_as_sfc.html">st_as_sfc</a></span>(
  <span class="fu"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span>(<span class="fl">1</span>, <span class="fl">5</span>), <span class="fu">function</span>(<span class="kw">x</span>) {
    <span class="fu"><a href="https://rdrr.io/pkg/sf/man/st.html">st_linestring</a></span>(<span class="kw">coords</span>[, <span class="fl">1</span><span class="op">:</span><span class="fl">2</span>] <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span>(<span class="fl">1</span>, <span class="op">-</span><span class="fl">1</span>, <span class="fl">1</span>), dim = <span class="st">"XY"</span>)
  }),
  crs = <span class="fl">4326</span>
))
<span class="co">#&gt; Geometry set for 5 features </span>
<span class="co">#&gt; geometry type:  LINESTRING</span>
<span class="co">#&gt; dimension:      XY</span>
<span class="co">#&gt; bbox:           xmin: 7.784132 ymin: 49.19539 xmax: 9.053932 ymax: 50.458</span>
<span class="co">#&gt; geographic CRS: WGS 84</span>
<span class="co">#&gt; LINESTRING (7.794822 49.19889, 7.792282 49.1986...</span>
<span class="co">#&gt; LINESTRING (8.549473 49.95354, 8.546933 49.9532...</span>
<span class="co">#&gt; LINESTRING (7.814304 49.21837, 7.811764 49.2181...</span>
<span class="co">#&gt; LINESTRING (8.460976 49.86505, 8.458436 49.8647...</span>
<span class="co">#&gt; LINESTRING (9.053932 50.458, 9.051392 50.45773,...</span>

(<span class="kw">sfc_enc</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/encode_sf.html">encode_sf</a></span>(<span class="kw">sfc</span>))
<span class="co">#&gt; [1] "BFilpsJ0tyvB1B7PzIhaxL7Y" "BF0x8wJm6l0B1B7PzIhaxL7Y"</span>
<span class="co">#&gt; [3] "BF6-ssJsn2vB1B7PzIhaxL7Y" "BFyorwJkx0zB1B7PzIhaxL7Y"</span>
<span class="co">#&gt; [5] "BFwi_zJiro3B1B7PzIhaxL7Y"</span>

<span class="fu"><a href="../reference/decode_sf.html">decode_sf</a></span>(<span class="kw">sfc_enc</span>)
<span class="co">#&gt; Simple feature collection with 5 features and 2 fields</span>
<span class="co">#&gt; geometry type:  LINESTRING</span>
<span class="co">#&gt; dimension:      XY</span>
<span class="co">#&gt; bbox:           xmin: 7.78413 ymin: 49.19539 xmax: 9.05393 ymax: 50.458</span>
<span class="co">#&gt; geographic CRS: WGS 84</span>
<span class="co">#&gt;   id   dim3                       geometry</span>
<span class="co">#&gt; 1  1 ABSENT LINESTRING (7.79482 49.1988...</span>
<span class="co">#&gt; 2  2 ABSENT LINESTRING (8.54947 49.9535...</span>
<span class="co">#&gt; 3  3 ABSENT LINESTRING (7.8143 49.21837...</span>
<span class="co">#&gt; 4  4 ABSENT LINESTRING (8.46098 49.8650...</span>
<span class="co">#&gt; 5  5 ABSENT LINESTRING (9.05393 50.458,...</span>
</pre></div>
</div>
<div id="simple-feature-sf" class="section level3">
<h3 class="hasAnchor">
<a href="#simple-feature-sf" class="anchor"></a>Simple feature (sf)</h3>
<p>A simple feature is a geometry that is connected with further characteristics (other than it’s coordinates), which in practice means a <code>data.frame</code> (also <code>data.table</code> or <code>tibble</code>) with an <code>sfc</code> column. The <code>flexpolyline</code> package only takes care of the coordinates of the LINESTRINGs in the sf object, other columns are not encoded and stored in the string:</p>
<div class="sourceCode" id="cb4"><pre class="downlit">
(<span class="kw">sf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/sf/man/st_as_sf.html">st_as_sf</a></span>(
  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(
    id = <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span>(<span class="fl">1</span>,<span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span>(<span class="kw">sfc</span>)),
    color = <span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"red"</span>, <span class="st">"green"</span>, <span class="st">"blue"</span>), <span class="fl">5</span>, replace = <span class="fl">TRUE</span>),
    geometry = <span class="kw">sfc</span>
  )
))
<span class="co">#&gt; Simple feature collection with 5 features and 2 fields</span>
<span class="co">#&gt; geometry type:  LINESTRING</span>
<span class="co">#&gt; dimension:      XY</span>
<span class="co">#&gt; bbox:           xmin: 7.784132 ymin: 49.19539 xmax: 9.053932 ymax: 50.458</span>
<span class="co">#&gt; geographic CRS: WGS 84</span>
<span class="co">#&gt;   id color                       geometry</span>
<span class="co">#&gt; 1  1  blue LINESTRING (7.794822 49.198...</span>
<span class="co">#&gt; 2  2  blue LINESTRING (8.549473 49.953...</span>
<span class="co">#&gt; 3  3  blue LINESTRING (7.814304 49.218...</span>
<span class="co">#&gt; 4  4 green LINESTRING (8.460976 49.865...</span>
<span class="co">#&gt; 5  5   red LINESTRING (9.053932 50.458...</span>

(<span class="kw">sf_enc</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/encode_sf.html">encode_sf</a></span>(<span class="kw">sf</span>))
<span class="co">#&gt; [1] "BFilpsJ0tyvB1B7PzIhaxL7Y" "BF0x8wJm6l0B1B7PzIhaxL7Y"</span>
<span class="co">#&gt; [3] "BF6-ssJsn2vB1B7PzIhaxL7Y" "BFyorwJkx0zB1B7PzIhaxL7Y"</span>
<span class="co">#&gt; [5] "BFwi_zJiro3B1B7PzIhaxL7Y"</span>

<span class="fu"><a href="../reference/decode_sf.html">decode_sf</a></span>(<span class="kw">sf_enc</span>)
<span class="co">#&gt; Simple feature collection with 5 features and 2 fields</span>
<span class="co">#&gt; geometry type:  LINESTRING</span>
<span class="co">#&gt; dimension:      XY</span>
<span class="co">#&gt; bbox:           xmin: 7.78413 ymin: 49.19539 xmax: 9.05393 ymax: 50.458</span>
<span class="co">#&gt; geographic CRS: WGS 84</span>
<span class="co">#&gt;   id   dim3                       geometry</span>
<span class="co">#&gt; 1  1 ABSENT LINESTRING (7.79482 49.1988...</span>
<span class="co">#&gt; 2  2 ABSENT LINESTRING (8.54947 49.9535...</span>
<span class="co">#&gt; 3  3 ABSENT LINESTRING (7.8143 49.21837...</span>
<span class="co">#&gt; 4  4 ABSENT LINESTRING (8.46098 49.8650...</span>
<span class="co">#&gt; 5  5 ABSENT LINESTRING (9.05393 50.458,...</span>
</pre></div>
<p><strong>Note:</strong> The columns <code>"id"</code> and <code>"color"</code> were not encoded and are missing after decoding.</p>
</div>
</div>
<div id="references" class="section level2">
<h2 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h2>
<ul>
<li><a href="https://cran.r-project.org/web/packages/sf/index.html">CRAN: Simple Features for R</a></li>
<li><a href="https://en.wikipedia.org/wiki/Simple_Features">Wikipedia: Simple Features</a></li>
<li><a href="https://www.ogc.org/standards/sfa">OGC: Simple Feature Access</a></li>
</ul>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by <a href="https://www.munterfinger.ch">Merlin Unterfinger</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.9000.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
